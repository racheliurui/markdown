title: AWS - EC2
date: 2018-02-28 10:57:23
tags:
- AWS
- EC2
---

# 015.mp4 EC2 -- Elastic Compute Cloud

# 016.mp4 Elastic Compute Cloud

Region: same region same price, same latency , same regulation
Available Zone:
Edge Location: Cloud Front

purchase mode,
1) on-demand instances
2) reserved instances
3) spot instances (错峰用机)

types of instances,
1) general
2) compute optimized
3) memery optimized
4) GPU
5) storage optimized

Special instance: T2 burstable performance instances

EC2 storage option,


# 017.mp4 Hands-on Creating a NodeJS server on EC2


* Step 1, created a users
* Step 2, created a group and attached aws build-in policy (admin access)
* Step 3, created a role with a unique arn, and have full admin access policy attached to it
* Step 4, create a security group to stand for the current webserver access.
     * it sits in certain VPC
     * it has inbound and outbound access defined.
* Step 5, launch EC2 AMI(aws machine images)
     * used the community built image
     * selected to assign public ip (as this is the web server)
     * "AMI Role" option is where define what role this EC2 AMI instance will perform; use the role created in step2
     * "select security group" , this step should use the security group we created at step 4
     * generate key pair or reuse existing one --- used to connect to the instance
* Step 6, tranfrom the pem downloaded to ppk and save to putty folder (used to access the instanse via SSH)
* Step 7, ssh to the instance and run the nodejs application
* Step 8, setup FileZilla to sftp to the instance (setting up the ppk file location)


# 018.mp4  Hands-on Connect to EC2 using Bash on windows

Directly git bash from the folder where the Pem sits.

```bash
cd /path/to/ppk
ssh -i "/path/to/pem" remotehostname
sftp -i "/path/to/pem" remotehostname
ls
lls
lcd /local/path/to
put /local/path/to/sourcefile.txt
```

# 019 hands-on connect to EC2 widnows instance

Difference with creating Linux instance,

* RDP (3389) need to be specified at security group (inbound)
* Windows Administrator password is dynamically randomly generated and as a PEM just like the linux instance (download)
* need to extract online and get administrator user and password


# 020 hands-on connect to EC2 via MacOS client


For linux

```shell
chmod 400 xxx.pem
ssh -i "/path/to/pem/xxx.pem" remotehostname
```

For Windows

download CORD RDP client


# 021 create a custom AMI

iptable rerounting

```shell
sudo iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8080
```

After everything is setup
select the instance -> action -> create image

AMI --> Images
Select the image being created we can
put it as Public
copy it to other region
